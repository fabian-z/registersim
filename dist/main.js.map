{"version":3,"sources":["webpack://registersim/./src/main.js","webpack://registersim/./src/parser/parser.js","webpack://registersim/./src/register.js","webpack://registersim/webpack/bootstrap","webpack://registersim/webpack/runtime/define property getters","webpack://registersim/webpack/runtime/hasOwnProperty shorthand","webpack://registersim/webpack/runtime/make namespace object","webpack://registersim/webpack/startup"],"names":["reg","RegisterMachine","executed","steps","outputStep","document","addEventListener","getElementById","reset","removeOutputRows","innerText","inRows","querySelectorAll","row","curReg","parseInt","querySelector","value","curVal","set","source","executionLog","instructionCallback","instruction","prefix","action","push","registers","entries","length","instructionToText","scrollTop","scrollHeight","ast","parse","processInstructions","e","errorMsg","name","location","start","line","column","message","console","log","sort","a","b","renderRegisterValues","input","newRegister","inputRow","createElement","className","innerHTML","append","inputRows","remove","showPreviousStep","showNextStep","window","event","defaultPrevented","tagName","target","toLowerCase","key","preventDefault","outRows","outTable","regVal","register","outerRow","firstCol","secondCol","commands","Error","peg$subclass","child","parent","C","constructor","prototype","peg$SyntaxError","expected","found","captureStackTrace","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","escapedParts","parts","map","part","Array","isArray","classEscape","inverted","any","end","other","description","not","describeExpectation","hex","ch","charCodeAt","toString","toUpperCase","s","replace","type","describeExpected","descriptions","i","j","slice","join","describeFound","peg$parse","options","undefined","peg$FAILED","peg$startRuleFunctions","commandSequence","peg$parsecommandSequence","peg$startRuleFunction","peg$c0","peg$c1","peg$r0","peg$r1","peg$r2","peg$r3","peg$e0","peg$literalExpectation","peg$e1","peg$e2","peg$classExpectation","peg$e3","peg$e4","peg$e5","peg$otherExpectation","peg$f0","command","peg$f1","peg$f2","peg$f3","peg$f4","digits","peg$currPos","peg$savedPos","peg$posDetailsCache","peg$expected","peg$silentFails","peg$result","startRule","substring","offset","range","peg$computeLocation","peg$buildStructuredError","error","peg$buildSimpleError","ignoreCase","peg$anyExpectation","peg$endExpectation","peg$computePosDetails","pos","details","p","peg$VALIDFILENAME","filename","startPos","endPos","loc","startPosDetails","endPosDetails","peg$begin","variants","peg$expect","top","peg$end","invert","pop","apply","peg$buildError","failPos","charAt","s0","s1","rule$expects","peg$parsecommand","s2","s3","peg$parse_","peg$parsedecrementLoop","peg$parseincrementCommand","peg$parsedecrementCommand","s4","s5","s6","peg$parseinteger","test","SyntaxError","Map","has","get","val","clear","res","size","callback","noop","increment","decrement"],"mappings":"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","file":"main.js","sourcesContent":["import { parse } from './parser/parser.js';\nimport { RegisterMachine } from './register.js';\n\nlet reg = new RegisterMachine(); // actual register machine instance used\nlet executed = []; // contains executed instructions\nlet steps = []; // contains register contents after execution\nlet outputStep = -1;\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    document.getElementById(\"execute\").addEventListener(\"click\", function() {\n        // Reset register machine and history\n        reg.reset();\n        executed = [];\n        steps = [];\n        outputStep = -1;\n\n        // Reset output\n        removeOutputRows();\n        document.getElementById(\"output-step\").innerText = \"\";\n        document.getElementById(\"execution-log\").innerText = \"\";\n\n        // set register from input\n        let inRows = document.querySelectorAll(\".input-row\");\n        for (let row of inRows) {\n            let curReg = parseInt(row.querySelector(\".input-register\").value);\n            let curVal = parseInt(row.querySelector(\".input-value\").value);\n            reg.set(curReg, curVal);\n        }\n\n        // execute source code\n        let source = document.getElementById(\"source\").value;\n\n        let executionLog = document.getElementById(\"execution-log\");\n        let instructionCallback = function(instruction) {\n            let prefix = \"\";\n            if (instruction.action !== \"loopUntilZero\") {\n                executed.push(instruction);\n                steps.push([...reg.registers.entries()]);\n                prefix = `(${executed.length}) `;\n            }\n\n            executionLog.innerText += prefix + `${instructionToText(instruction)}\\n`;\n            executionLog.scrollTop = executionLog.scrollHeight;\n        };\n\n        try {\n            let ast = parse(source);\n            reg.processInstructions(ast, instructionCallback);\n        } catch (e) {\n            let errorMsg;\n            if (e.name === \"SyntaxError\") {\n                errorMsg = `Syntax error on line ${e.location.start.line}, column ${e.location.start.column}: ${e.message}`;\n            } else {\n                errorMsg = \"Unexpected error: \" + e.message;\n            }\n            executionLog.innerText = errorMsg;\n            console.log(e);\n            return;\n        }\n\n        // extract and sort results\n        let registers = [...reg.registers.entries()].sort((a, b) => a[0] - b[0]);\n\n        // execution log final padding\n        executionLog.innerText += \"\\n\";\n        executionLog.scrollTop = executionLog.scrollHeight;\n\n        // show results in DOM\n        outputStep = steps.length;\n        document.getElementById(\"output-step\").innerText = outputStep;\n        renderRegisterValues(registers);\n    });\n\n    document.getElementById(\"add-register\").addEventListener(\"click\", function() {\n        let input = document.getElementById(\"input-table\");\n\n        let registers = input.querySelectorAll(\".input-register\");\n        let newRegister = parseInt(registers[registers.length-1].value) + 1;\n\n        let inputRow = document.createElement(\"tr\");\n        inputRow.className = \"input-row\";\n        inputRow.innerHTML = `<td><input class=\"input-register\" type=\"number\" min=\"0\" step=\"1\" value=\"${newRegister}\"></td>\n        <td><input class=\"input-value\" type=\"number\" min=\"0\" step=\"1\" value=\"0\"></td>`;\n\n        input.append(inputRow);\n    });\n\n    document.getElementById(\"remove-register\").addEventListener(\"click\", function() {\n        let inputRows = document.querySelectorAll(\".input-row\");\n        if (inputRows.length > 1) {\n            inputRows[inputRows.length - 1].remove();\n        }\n    });\n\n    document.getElementById(\"output-prev\").addEventListener(\"click\", function() {\n        showPreviousStep();\n    });\n\n    document.getElementById(\"output-next\").addEventListener(\"click\", function() {\n      showNextStep();\n    });\n\n    window.addEventListener(\"keydown\", function (event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        let tagName = event.target.tagName.toLowerCase();\n        if (tagName === \"input\" || tagName === \"textarea\") {\n            return;\n        }\n      \n        switch (event.key) {\n          case \"Left\": // IE/Edge specific value\n          case \"ArrowLeft\": {\n            showPreviousStep();\n            break;\n          }  \n          case \"Right\": // IE/Edge specific value\n          case \"ArrowRight\": {\n            showNextStep();\n            break;\n          }\n          default:\n            return;\n        }\n        event.preventDefault();\n      }, true);\n      \n});\n\nfunction showPreviousStep() {\n    if (outputStep <= 1 || steps.length < 1) {\n        return;\n    }\n    outputStep -= 1;\n    let registers = steps[outputStep - 1].sort((a, b) => a[0] - b[0]);\n    document.getElementById(\"output-step\").innerText = outputStep;\n    renderRegisterValues(registers);\n}\n\nfunction showNextStep() {\n    if (outputStep < 0 || steps.length < 1) {\n        return;\n    }\n    if (outputStep + 1 > steps.length) {\n        return;\n    }\n    outputStep += 1;\n    let registers = steps[outputStep - 1].sort((a, b) => a[0] - b[0]);\n    document.getElementById(\"output-step\").innerText = outputStep;\n    renderRegisterValues(registers);\n}\n\nfunction removeOutputRows() {\n    let outRows = document.querySelectorAll(\".output-row\");\n    for (let row of outRows) {\n        row.remove();\n    }\n}\n\nfunction renderRegisterValues(registers) {\n    removeOutputRows();\n    let outTable = document.getElementById(\"output-table\");\n    for (let regVal of registers) {\n        let register = regVal[0];\n        let value = regVal[1];\n\n        let outerRow = document.createElement(\"tr\");\n        outerRow.className = \"output-row\";\n\n        let firstCol = document.createElement(\"td\");\n        firstCol.innerText = register;\n\n        let secondCol = document.createElement(\"td\");\n        secondCol.innerText = value;\n\n        outerRow.append(firstCol);\n        outerRow.append(secondCol);\n        outTable.append(outerRow);\n    }\n}\n\nfunction instructionToText(instruction) {\n    switch (instruction.action) {\n        case \"increment\": {\n            return `Incrementing register ${instruction.register}`;\n        }\n        case \"decrement\": {\n            return `Decrementing register ${instruction.register}`;\n        }\n        case \"loopUntilZero\": {\n            return `Looping ${instruction.commands.length} instruction(s) while register ${instruction.register} is not 0`;\n        }\n        default: {\n            throw new Error(\"invalid instruction: \" + instruction.action);\n        }\n    }\n}","// Generated by PEG.js v0.11.0-master.f69239d, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { commandSequence: peg$parsecommandSequence };\n  var peg$startRuleFunction = peg$parsecommandSequence;\n\n  var peg$c0 = \"(\";\n  var peg$c1 = \")\";\n\n  var peg$r0 = /^[aA]/;\n  var peg$r1 = /^[sS]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\n\\r]/;\n\n  var peg$e0 = peg$literalExpectation(\"(\", false);\n  var peg$e1 = peg$literalExpectation(\")\", false);\n  var peg$e2 = peg$classExpectation([\"a\", \"A\"], false, false);\n  var peg$e3 = peg$classExpectation([\"s\", \"S\"], false, false);\n  var peg$e4 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e5 = peg$otherExpectation(\"whitespace\");\n\n  var peg$f0 = function(command) { return command; };\n  var peg$f1 = function(commands, reg) { return {action: \"loopUntilZero\", register: reg, commands: commands}; };\n  var peg$f2 = function(reg) { return {action: \"increment\", register: reg }};\n  var peg$f3 = function(reg) { return {action: \"decrement\", register: reg }};\n  var peg$f4 = function(digits) { return parseInt(digits.join(\"\")) };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsecommandSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsecommand();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsecommand();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommand() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    s2 = peg$parsedecrementLoop();\n    if (s2 === peg$FAILED) {\n      s2 = peg$parseincrementCommand();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parsedecrementCommand();\n      }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parse_();\n      peg$savedPos = s0;\n      s0 = peg$f0(s2);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedecrementLoop() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s1 = peg$c0;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      s3 = peg$parsecommandSequence();\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parse_();\n        rule$expects(peg$e1);\n        if (input.charCodeAt(peg$currPos) === 41) {\n          s5 = peg$c1;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parseinteger();\n          if (s6 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f1(s3, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseincrementCommand() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e2);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseinteger();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f2(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedecrementCommand() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseinteger();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f3(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseinteger() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    rule$expects(peg$e4);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        rule$expects(peg$e4);\n        if (peg$r2.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f4(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parse_() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e5);\n    peg$silentFails++;\n    s0 = [];\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (peg$r3.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","export class RegisterMachine {\n    registers = new Map();\n\n    get(reg) {\n        if (!this.registers.has(reg)) {\n            this.registers.set(reg, 0);\n            return 0;\n        }\n        return this.registers.get(reg);\n    }\n\n    set(reg, val) {\n        if (val < 0) {\n            throw new Error(`invalid set - register ${reg} negative`);\n        }\n        this.registers.set(reg, val);\n    }\n\n    reset() {\n        this.registers.clear();\n    }\n\n    increment(reg) {\n        this.registers.set(reg, this.get(reg) + 1);\n    }\n\n    decrement(reg) {\n        let res = this.get(reg) - 1;\n        if (res < 0) {\n            res = 0;\n        }\n        this.registers.set(reg, res);\n    }\n\n    length() {\n        return this.registers.size();\n    }\n\n    processInstructions(ast, instructionCallback) {\n        // Setup callback if requested, noop otherwise\n        // instructionCallback is executed after commands and before\n        // entering loops\n        let callback = noop;\n        if (instructionCallback) {\n            callback = instructionCallback;\n        }\n\n        // Process commands\n        for (let command of ast) {\n            switch (command.action) {\n                case \"increment\": {\n                    this.increment(command.register);\n                    callback(command);\n                    break;\n                }\n                case \"decrement\": {\n                    this.decrement(command.register);\n                    callback(command);\n                    break;\n                }\n                case \"loopUntilZero\": {\n                    callback(command);\n                    while (this.get(command.register) !== 0) {\n                        this.processInstructions(command.commands, instructionCallback);\n                    }\n                    break;\n                }\n                default:\n                    throw new Error(\"invalid command parsed\");\n            }\n        }\n    }\n}\n\nfunction noop() {}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/main.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}